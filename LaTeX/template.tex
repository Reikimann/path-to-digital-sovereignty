\documentclass[a4paper,11pt,oneside]{book}

\newcommand{\doctitle}{Plan for Digital Resiliens og Suverænitet}

\usepackage[danish]{babel}  % Danish language support

\usepackage{iftex}          % Check LaTeX-engine
\ifpdftex
  \usepackage{libertine}
  \usepackage{libertinust1math}
  \usepackage[utf8]{inputenc}
  \usepackage[T1]{fontenc}
\else
  \usepackage{fontspec}
  \setmainfont{Linux Libertine O}[Ligatures=TeX,Scale=1]
\fi

\usepackage{geometry}       % Page geometry
\usepackage{graphicx}       % Images
\usepackage{hyperref}       % Hyperlinks
\selectlanguage{danish}
\usepackage{xcolor}         % Colors
\usepackage{titlesec}       % Title formatting
\usepackage{enumitem}       % List customization
\usepackage{fancyhdr}       % Headers and footers
\usepackage{tcolorbox}      % Colored boxes
\usepackage{listings}       % Code listings
\usepackage{microtype}      % Typography improvements
\usepackage{booktabs}       % Better tables

% Page geometry
\geometry{
    a4paper,
    top=2.5cm,
    bottom=2.5cm,
    left=3cm,
    right=3cm,
    headheight=14pt
}

% Colors
\definecolor{primary}{RGB}{0, 60, 120}   % Dark blue
\definecolor{secondary}{RGB}{0, 110, 180} % Medium blue
\definecolor{accent}{RGB}{0, 150, 200}    % Light blue
\definecolor{light}{RGB}{240, 245, 250}   % Very light blue
\definecolor{dark}{RGB}{50, 50, 50}       % Dark gray

% Hyperlink styling
\hypersetup{
    colorlinks=true,
    linkcolor=secondary,
    urlcolor=accent,
    citecolor=secondary,
    pdfauthor={IT-Beredskab},
    pdftitle={\doctitle},
    pdfsubject={Beredskabsplan for IT-systemer},
    pdfkeywords={IT, beredskab, krise, planlægning}
}

% Title formatting
% Modified title formatting for chapters (without "Chapter X")
\titleformat{\chapter}[display]
{\normalfont\huge\bfseries\color{primary}}
{}{0pt}{\Huge}

\titlespacing*{\chapter}{0pt}{0pt}{40pt}

\titleformat{\section}
{\normalfont\Large\bfseries\color{secondary}}
{\thesection}{1em}{}
\titlespacing*{\section}{0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}

\titleformat{\subsection}
{\normalfont\large\bfseries\color{secondary}}
{\thesubsection}{1em}{}

% Headers and footers
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L,L]{\textit{\doctitle}} % Left: document title
\fancyhead[R,R]{\textit{\nouppercase{\leftmark}}}  % Right: chapter title
\fancyfoot[C]{\thepage}
% Remove line below if "Kapitel X. {chapter title}" is wanted
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\headrulewidth}{.4pt}
\renewcommand{\footrulewidth}{0pt}

% Box for important notes
\newtcolorbox{infobox}{
    colback=light,
    colframe=accent,
    boxrule=0.5pt,
    arc=3mm,
    fonttitle=\bfseries,
    top=3mm,
    bottom=3mm,
    left=3mm,
    right=3mm
}

% Code listing style
\lstset{
    basicstyle=\ttfamily\small,
    backgroundcolor=\color{light},
    frame=single,
    framesep=3pt,
    breaklines=true,
    postbreak=\mbox{\textcolor{accent}{$\hookrightarrow$}\space},
    numbers=left,
    numberstyle=\tiny\color{dark},
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    captionpos=b,
    keywordstyle=\color{secondary}\bfseries,
    commentstyle=\color{dark}\itshape,
    stringstyle=\color{accent}
}

% Undefines tightlist, which is defined by Pandoc when
% not having blank lines between listitems in markdown
\def\tightlist{}

% Begin document
\begin{document}

% Title page
\begin{titlepage}
    \centering
    \vspace*{2cm}
    {\Huge\bfseries \doctitle\par}
    \vspace{1cm}
    {\Large En beredskabsplan for tab af adgang til amerikanske IT-systemer\par}
    \vspace{2cm}

    \vspace{2cm}
    {\Large\itshape En fem-faset plan for krisehåndtering\par}
    \vfill

    % Bottom of the page
    {\large \today\par}
\end{titlepage}

\frontmatter
% Table of contents
\tableofcontents
\newpage

\mainmatter
% Main content - will be replaced by the Python script
{{CONTENT}}

\end{document}
